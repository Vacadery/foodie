'use strict';var cov_2qw290rsj1=function(){var path="/Users/emma/bootcamp/collab/skylab-bootcamp-201901/staff/emma-cowdery/fws/fws-api/src/google-maps-api/index.js";var hash="dbae844a2a1692025b392d3b7360d23b2fcb0fd0";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/emma/bootcamp/collab/skylab-bootcamp-201901/staff/emma-cowdery/fws/fws-api/src/google-maps-api/index.js",statementMap:{"0":{start:{line:3,column:0},end:{line:3,column:26}},"1":{start:{line:5,column:22},end:{line:164,column:1}},"2":{start:{line:30,column:8},end:{line:30,column:82}},"3":{start:{line:30,column:39},end:{line:30,column:82}},"4":{start:{line:32,column:8},end:{line:32,column:63}},"5":{start:{line:32,column:34},end:{line:32,column:63}},"6":{start:{line:34,column:35},end:{line:34,column:39}},"7":{start:{line:36,column:8},end:{line:67,column:14}},"8":{start:{line:38,column:12},end:{line:54,column:18}},"9":{start:{line:40,column:20},end:{line:40,column:45}},"10":{start:{line:41,column:20},end:{line:41,column:45}},"11":{start:{line:43,column:20},end:{line:53,column:26}},"12":{start:{line:48,column:42},end:{line:48,column:57}},"13":{start:{line:50,column:28},end:{line:50,column:104}},"14":{start:{line:50,column:58},end:{line:50,column:104}},"15":{start:{line:52,column:28},end:{line:52,column:51}},"16":{start:{line:57,column:13},end:{line:67,column:14}},"17":{start:{line:62,column:30},end:{line:62,column:45}},"18":{start:{line:64,column:16},end:{line:64,column:92}},"19":{start:{line:64,column:46},end:{line:64,column:92}},"20":{start:{line:66,column:16},end:{line:66,column:39}},"21":{start:{line:75,column:8},end:{line:75,column:96}},"22":{start:{line:75,column:46},end:{line:75,column:96}},"23":{start:{line:77,column:8},end:{line:77,column:77}},"24":{start:{line:77,column:41},end:{line:77,column:77}},"25":{start:{line:79,column:37},end:{line:79,column:41}},"26":{start:{line:81,column:8},end:{line:91,column:14}},"27":{start:{line:86,column:30},end:{line:86,column:45}},"28":{start:{line:88,column:16},end:{line:88,column:99}},"29":{start:{line:88,column:46},end:{line:88,column:99}},"30":{start:{line:90,column:16},end:{line:90,column:38}},"31":{start:{line:101,column:8},end:{line:101,column:100}},"32":{start:{line:101,column:48},end:{line:101,column:100}},"33":{start:{line:103,column:8},end:{line:103,column:81}},"34":{start:{line:103,column:43},end:{line:103,column:81}},"35":{start:{line:105,column:50},end:{line:105,column:54}},"36":{start:{line:107,column:8},end:{line:116,column:14}},"37":{start:{line:113,column:16},end:{line:113,column:103}},"38":{start:{line:113,column:50},end:{line:113,column:103}},"39":{start:{line:115,column:16},end:{line:115,column:35}},"40":{start:{line:149,column:24},end:{line:149,column:28}},"41":{start:{line:151,column:8},end:{line:162,column:18}},"42":{start:{line:157,column:30},end:{line:157,column:45}},"43":{start:{line:159,column:20},end:{line:159,column:93}},"44":{start:{line:159,column:40},end:{line:159,column:93}},"45":{start:{line:161,column:20},end:{line:161,column:44}},"46":{start:{line:166,column:0},end:{line:166,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:29,column:4},end:{line:29,column:5}},loc:{start:{line:29,column:29},end:{line:68,column:5}},line:29},"1":{name:"(anonymous_1)",decl:{start:{line:39,column:22},end:{line:39,column:23}},loc:{start:{line:39,column:38},end:{line:54,column:17}},line:39},"2":{name:"(anonymous_2)",decl:{start:{line:48,column:30},end:{line:48,column:31}},loc:{start:{line:48,column:42},end:{line:48,column:57}},line:48},"3":{name:"(anonymous_3)",decl:{start:{line:49,column:30},end:{line:49,column:31}},loc:{start:{line:49,column:42},end:{line:53,column:25}},line:49},"4":{name:"(anonymous_4)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:30},end:{line:62,column:45}},line:62},"5":{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:30},end:{line:67,column:13}},line:63},"6":{name:"(anonymous_6)",decl:{start:{line:74,column:4},end:{line:74,column:5}},loc:{start:{line:74,column:36},end:{line:92,column:5}},line:74},"7":{name:"(anonymous_7)",decl:{start:{line:86,column:18},end:{line:86,column:19}},loc:{start:{line:86,column:30},end:{line:86,column:45}},line:86},"8":{name:"(anonymous_8)",decl:{start:{line:87,column:18},end:{line:87,column:19}},loc:{start:{line:87,column:30},end:{line:91,column:13}},line:87},"9":{name:"(anonymous_9)",decl:{start:{line:100,column:4},end:{line:100,column:5}},loc:{start:{line:100,column:32},end:{line:117,column:5}},line:100},"10":{name:"(anonymous_10)",decl:{start:{line:112,column:18},end:{line:112,column:19}},loc:{start:{line:112,column:30},end:{line:116,column:13}},line:112},"11":{name:"(anonymous_11)",decl:{start:{line:148,column:4},end:{line:148,column:5}},loc:{start:{line:148,column:18},end:{line:163,column:5}},line:148},"12":{name:"(anonymous_12)",decl:{start:{line:157,column:18},end:{line:157,column:19}},loc:{start:{line:157,column:30},end:{line:157,column:45}},line:157},"13":{name:"(anonymous_13)",decl:{start:{line:158,column:22},end:{line:158,column:23}},loc:{start:{line:158,column:34},end:{line:162,column:17}},line:158}},branchMap:{"0":{loc:{start:{line:30,column:8},end:{line:30,column:82}},type:"if",locations:[{start:{line:30,column:8},end:{line:30,column:82}},{start:{line:30,column:8},end:{line:30,column:82}}],line:30},"1":{loc:{start:{line:32,column:8},end:{line:32,column:63}},type:"if",locations:[{start:{line:32,column:8},end:{line:32,column:63}},{start:{line:32,column:8},end:{line:32,column:63}}],line:32},"2":{loc:{start:{line:36,column:8},end:{line:67,column:14}},type:"if",locations:[{start:{line:36,column:8},end:{line:67,column:14}},{start:{line:36,column:8},end:{line:67,column:14}}],line:36},"3":{loc:{start:{line:50,column:28},end:{line:50,column:104}},type:"if",locations:[{start:{line:50,column:28},end:{line:50,column:104}},{start:{line:50,column:28},end:{line:50,column:104}}],line:50},"4":{loc:{start:{line:64,column:16},end:{line:64,column:92}},type:"if",locations:[{start:{line:64,column:16},end:{line:64,column:92}},{start:{line:64,column:16},end:{line:64,column:92}}],line:64},"5":{loc:{start:{line:75,column:8},end:{line:75,column:96}},type:"if",locations:[{start:{line:75,column:8},end:{line:75,column:96}},{start:{line:75,column:8},end:{line:75,column:96}}],line:75},"6":{loc:{start:{line:77,column:8},end:{line:77,column:77}},type:"if",locations:[{start:{line:77,column:8},end:{line:77,column:77}},{start:{line:77,column:8},end:{line:77,column:77}}],line:77},"7":{loc:{start:{line:88,column:16},end:{line:88,column:99}},type:"if",locations:[{start:{line:88,column:16},end:{line:88,column:99}},{start:{line:88,column:16},end:{line:88,column:99}}],line:88},"8":{loc:{start:{line:101,column:8},end:{line:101,column:100}},type:"if",locations:[{start:{line:101,column:8},end:{line:101,column:100}},{start:{line:101,column:8},end:{line:101,column:100}}],line:101},"9":{loc:{start:{line:103,column:8},end:{line:103,column:81}},type:"if",locations:[{start:{line:103,column:8},end:{line:103,column:81}},{start:{line:103,column:8},end:{line:103,column:81}}],line:103},"10":{loc:{start:{line:113,column:16},end:{line:113,column:103}},type:"if",locations:[{start:{line:113,column:16},end:{line:113,column:103}},{start:{line:113,column:16},end:{line:113,column:103}}],line:113},"11":{loc:{start:{line:159,column:20},end:{line:159,column:93}},type:"if",locations:[{start:{line:159,column:20},end:{line:159,column:93}},{start:{line:159,column:20},end:{line:159,column:93}}],line:159}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2qw290rsj1.s[0]++;require('dotenv').config();const googleMapsApi=(cov_2qw290rsj1.s[1]++,{url:'https://maps.googleapis.com/maps/api/place',key:'key=AIzaSyAUiu1mu4XTzZxHmRObd5LpB_7IBa6ysf0',fields:'fields=photos,url,international_phone_number,opening_hours,website',type:'type=restaurant',input:'input=name',maxHeight:'maxheight=480',maxWidth:'maxwidth=640',lat:'41.3903691',lng:'2.188351',/**
     * 
     * @param {string} query 
     */searchRestaurants(query){cov_2qw290rsj1.f[0]++;cov_2qw290rsj1.s[2]++;if(typeof query!=='string'){cov_2qw290rsj1.b[0][0]++;cov_2qw290rsj1.s[3]++;throw TypeError(`${query} is not a string`);}else{cov_2qw290rsj1.b[0][1]++;}cov_2qw290rsj1.s[4]++;if(!query.trim().length){cov_2qw290rsj1.b[1][0]++;cov_2qw290rsj1.s[5]++;throw Error('query is empty');}else{cov_2qw290rsj1.b[1][1]++;}const{url,key,type}=(cov_2qw290rsj1.s[6]++,this);cov_2qw290rsj1.s[7]++;if(query.includes('near me')){cov_2qw290rsj1.b[2][0]++;cov_2qw290rsj1.s[8]++;return this.geolocation().then(({lat,lng})=>{cov_2qw290rsj1.f[1]++;cov_2qw290rsj1.s[9]++;this.lat=lat.toString();cov_2qw290rsj1.s[10]++;this.lng=lng.toString();cov_2qw290rsj1.s[11]++;return fetch(`${url}/textsearch/json?query=${query}&${type}&location=${lat},${lng}&radius=3000&${key}`,{headers:{'content-type':'application/json'}}).then(response=>{cov_2qw290rsj1.f[2]++;cov_2qw290rsj1.s[12]++;return response.json();}).then(response=>{cov_2qw290rsj1.f[3]++;cov_2qw290rsj1.s[13]++;if(response.status!=='OK'){cov_2qw290rsj1.b[3][0]++;cov_2qw290rsj1.s[14]++;throw Error('unable to search at this moment');}else{cov_2qw290rsj1.b[3][1]++;}cov_2qw290rsj1.s[15]++;return response.results;});});}else{cov_2qw290rsj1.b[2][1]++;cov_2qw290rsj1.s[16]++;return fetch(`${url}/textsearch/json?query=${query}&${type}&${key}`,{headers:{'content-type':'application/json'}}).then(response=>{cov_2qw290rsj1.f[4]++;cov_2qw290rsj1.s[17]++;return response.json();}).then(response=>{cov_2qw290rsj1.f[5]++;cov_2qw290rsj1.s[18]++;if(response.status!=='OK'){cov_2qw290rsj1.b[4][0]++;cov_2qw290rsj1.s[19]++;throw Error('unable to search at this moment');}else{cov_2qw290rsj1.b[4][1]++;}cov_2qw290rsj1.s[20]++;return response.results;});}},/**
     * 
     * @param {string} restaurantId 
     */restaurantDetails(restaurantId){cov_2qw290rsj1.f[6]++;cov_2qw290rsj1.s[21]++;if(typeof restaurantId!=='string'){cov_2qw290rsj1.b[5][0]++;cov_2qw290rsj1.s[22]++;throw TypeError(`${restaurantId} is not a string`);}else{cov_2qw290rsj1.b[5][1]++;}cov_2qw290rsj1.s[23]++;if(!restaurantId.trim().length){cov_2qw290rsj1.b[6][0]++;cov_2qw290rsj1.s[24]++;throw Error('restaurantId is empty');}else{cov_2qw290rsj1.b[6][1]++;}const{url,key,fields}=(cov_2qw290rsj1.s[25]++,this);cov_2qw290rsj1.s[26]++;return fetch(`${url}/details/json?placeid=${restaurantId}&${fields}&${key}`,{headers:{'content-type':'application/json'}}).then(response=>{cov_2qw290rsj1.f[7]++;cov_2qw290rsj1.s[27]++;return response.json();}).then(response=>{cov_2qw290rsj1.f[8]++;cov_2qw290rsj1.s[28]++;if(response.status!=='OK'){cov_2qw290rsj1.b[7][0]++;cov_2qw290rsj1.s[29]++;throw Error('unable to fetch details at this moment');}else{cov_2qw290rsj1.b[7][1]++;}cov_2qw290rsj1.s[30]++;return response.result;});},//NOT WORKING!!!!!!!
/**
     * 
     * @param {string} photoReference 
     */resizePhoto(photoReference){cov_2qw290rsj1.f[9]++;cov_2qw290rsj1.s[31]++;if(typeof photoReference!=='string'){cov_2qw290rsj1.b[8][0]++;cov_2qw290rsj1.s[32]++;throw TypeError(`${photoReference} is not a string`);}else{cov_2qw290rsj1.b[8][1]++;}cov_2qw290rsj1.s[33]++;if(!photoReference.trim().length){cov_2qw290rsj1.b[9][0]++;cov_2qw290rsj1.s[34]++;throw Error('photoReference is empty');}else{cov_2qw290rsj1.b[9][1]++;}const{url,key,maxHeight,maxWidth}=(cov_2qw290rsj1.s[35]++,this);cov_2qw290rsj1.s[36]++;return fetch(`${url}/photo?${maxWidth}&${maxHeight}&photoreference=${photoReference}&${key}`,{headers:{'content-type':'application/json'}}).then(response=>{cov_2qw290rsj1.f[10]++;cov_2qw290rsj1.s[37]++;if(response.statusText!=='OK'){cov_2qw290rsj1.b[10][0]++;cov_2qw290rsj1.s[38]++;throw Error('unable to fetch details at this moment');}else{cov_2qw290rsj1.b[10][1]++;}cov_2qw290rsj1.s[39]++;return response.url;});},//     /**
//  * 
//  * @param {string} query 
//  */
// searchRestaurants(query) {
//     if (typeof query !== 'string') throw TypeError(`${query} is not a string`)
//     if (!query.trim().length) throw Error('query is empty')
//     const { url, key, type } = this
//     console.log(key)
//     return fetch(`${url}/findplacefromtext/json?input=${query}&inputtype=textquery&fields=photos,formatted_address,name,rating,opening_hours,geometry&${type}&${key}`, {
//         headers: {
//             'content-type': 'application/json'
//         }
//     })
//         .then(response => response.json())
//         .then(response => {
//             console.log(response)
//             console.log(response.results)
//             if (response.status !== 'OK') throw Error('unable to search at this moment')
//             return response.results
//         })
// },
geolocation(){cov_2qw290rsj1.f[11]++;const{key}=(cov_2qw290rsj1.s[40]++,this);cov_2qw290rsj1.s[41]++;return fetch(`https://www.googleapis.com/geolocation/v1/geolocate?${key}`,{method:'POST',headers:{'content-type':'application/json'}}).then(response=>{cov_2qw290rsj1.f[12]++;cov_2qw290rsj1.s[42]++;return response.json();}).then(response=>{cov_2qw290rsj1.f[13]++;cov_2qw290rsj1.s[43]++;if(response.error){cov_2qw290rsj1.b[11][0]++;cov_2qw290rsj1.s[44]++;throw Error('unable to fetch details at this moment');}else{cov_2qw290rsj1.b[11][1]++;}cov_2qw290rsj1.s[45]++;return response.location;});}});cov_2qw290rsj1.s[46]++;module.exports=googleMapsApi;